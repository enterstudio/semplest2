@model Semplest.Core.Models.CampaignSetupModel
@{
    ViewBag.Title = "Campaign";
}
<link href="@Url.Content("~/Content/formStyle.css")" rel="stylesheet" type="text/css" />
@{ 
    decimal budget, semplestcharge, mediaspend, creditcardcharge;
    if (Model.Configuration.SemplestDefaultBudgetMarkUpOrDown == "1")
    { //markup

        budget = Model.ProductGroup.Budget;


        if (Model.PromotionFeeOverRide)
        {

            semplestcharge = Model.PromotionFeeOverRideAmount == null ? 0 : Convert.ToDecimal(Model.PromotionFeeOverRideAmount);
        }
        else
        {
            semplestcharge = (Model.Configuration.CustomerDefaultPerCampaignFlatFeeAmount);
        }

        // Now add in any % of Media Charge 

        decimal xxx = (budget - semplestcharge) * Model.PercentMedia;

        semplestcharge = semplestcharge + xxx;
        mediaspend = (budget - semplestcharge);
        creditcardcharge = budget;
    }
    else
    { //markdown

        budget = Model.ProductGroup.Budget;


        if (Model.PromotionFeeOverRide)
        {
            semplestcharge = Model.PromotionFeeOverRideAmount == null ? 0 : Convert.ToDecimal(Model.PromotionFeeOverRideAmount);
        }
        else
        {
            semplestcharge = (Model.Configuration.CustomerDefaultPerCampaignFlatFeeAmount);
        }

        // Now add in any % of Media Charge 

        decimal xxx = (budget - semplestcharge) * Model.PercentMedia;

        semplestcharge = semplestcharge + xxx;

        mediaspend = (budget);
        creditcardcharge = semplestcharge + budget;
    }

}
<style>
    #tickets h3
    {
        font-weight: normal;
        font-size: 1.4em;
        display: inline-block;
        border-bottom: 1px solid #ccc;
    }
    #tickets a
    {
        color: gray;
        text-decoration: underline;
    }
    #tickets ul
    {
        list-style-type: none;
        margin: 0;
        padding: 0;
    }
    #tickets li
    {
        margin: 10px 0 0 0;
    }
    #tickets label
    {
        display: inline-block;
        font-weight: bold;
        color: Gray;
    }
    .addnewcard
    {
        margin-left: 10px;
    }
</style>
<div id="tickets">
    <ul>
        <li>
            <label>
                We have selected</label>
            <h3 id="KeywordCount" style="color: #8ebc00; font-weight: bold">
                @Model.BillingLaunch.KeywordsCount</h3>
            <label>
                keywords to bid on!
            </label>
            <a href="#" id="viewSelectedKeywords" style="margin-left: 105px;">View selected keywords</a>
        </li>
        <li>
            <label id="lblbudget">
                Budget</label>
            <label id="lblsemplestCharge" class="k-label" style="margin-left: 103px;">
                SEMplest Charge</label>
            <label id="lbltotalMediaSpend" class="k-label" style="margin-left: 83px;">
                Total Media Spend</label>
            <label id="lbltotalcreditCardCharge" class="k-label" style="margin-left: 73px;">
                Total Credit Card Charge</label>
        </li>
        <li>
            <input type="text" class="k-inputlabel" id="budget" value="$@budget.ToString("n2")" readonly="readonly" style="width:60px; text-align:left;"/>
            <input type="text" class="k-inputlabel" id="Semplestcharge" value="$@semplestcharge.ToString("n2")" readonly="readonly" style="width: 70px; margin-left: 105px;text-align:right;"/>
            <input type="text" class="k-inputlabel" id="txttotalMedia" value="$@mediaspend.ToString("n2")"  readonly="readonly"  style=" width: 75px; margin-left: 110px;text-align:right;"/>
            <input type="text" class="k-inputlabel" id="txtCredCharge" value="$@creditcardcharge.ToString("n2")" readonly="readonly" style="width:85px; margin-left: 120px;text-align:right;"/>
        </li>
        @if (Model.BillType == 2)
        {
            <div class="table">
                <ul class="accept">
                    <li><label>Billing Information</label></li>
                    
                    @{
                        IEnumerable<SelectListItem> slemo = new SelectList(new[] {"-Select Month-", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"}, "-Select Month-");
                        IEnumerable<SelectListItem> sleyr = new SelectList(new[] {"-Select Year-", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020"}, "-Select Year-");
                    }
                    <li>
                        <label class="creditCardlabel">
                            First Name</label>
                        @Html.TextBoxFor(f => f.BillingLaunch.FirstName, new { @class = "k-textbox", @required = true, @validationmessage = "Please enter Title" })
                    
                        <label class="creditCardlabel" style="padding-left:25px;">
                            Last Name</label>
                        @Html.TextBoxFor(l => l.BillingLaunch.LastName, new { @class = "k-textbox" })
                    </li>
                    <li>
                        <label class="creditCardlabel">
                            Address</label>
                        @Html.TextBoxFor(a => a.BillingLaunch.Address, new { @class = "k-textbox" })
                        <label class="creditCardlabel" style="padding-left:25px;">
                            City / Town</label>
                        @Html.TextBoxFor(c => c.BillingLaunch.City, new { @class = "k-textbox" })
                    </li>
                    <li>
                        <label class="creditCardlabel">
                            State </label>
                        @Html.DropDownListFor(s => Model.BillingLaunch.StateCodeFK, Model.BillingLaunch.StateCodeList, Model.BillingLaunch.StateCodeFK)

                        <label class="creditCardlabel" style="padding-left:114px;">
                            Zip</label>
                        @Html.TextBoxFor(z => z.BillingLaunch.Zip, new { @class = "k-textbox" })
                    </li>
                    <li>
                        <label class="creditCardlabel">
                            Phone Number</label>
                        @Html.TextBoxFor(p => p.BillingLaunch.Phone, new { @class = "k-textbox" })

                        <label class="creditCardlabel" style="padding-left:25px;">
                            Email</label>
                        @Html.TextBoxFor(e => e.BillingLaunch.Email, new { @class = "k-textbox" })
                    </li>
                </ul>
            </div>
                                <li>
                        <label class="creditCardlabel">
                            Card Number</label>
                        @Html.TextBoxFor(c => c.BillingLaunch.CardNumber, new { @class = "k-textbox" })
                    </li>
                    <li>
                        <label class="creditCardlabel">
                            Expiry Date</label>
                        @Html.DropDownList("ExpirationMonth", slemo, new { @id = "creditcardMonth" })
                        @Html.DropDownList("ExpirationDate", sleyr, new { @id = "creditcardYear" })
                    </li>
            <li>
                <div>
                    <input type="checkbox" id="agreecheckbox" /><label style="margin-left: 5px; color: grey;">I
                                                                    have read the
                                                                </label>
                    @Html.ActionLink("Services Agreement", "ServicesAgreement", "Home")
                    <label style="color: grey;">
                        and agree that as long as my advertising is live,</label>
                    <br />
                    <label style="margin-left: 18px; color: grey;">
                        I will be billed the amount above on a monthly basis</label>
                </div>
            </li>
        }
        <li>
            <div style="text-align: center">
                <button class="k-button" id="editadproduct" type="button" style="margin-top: 7px">
                    <span class="k-back k-icon"></span>EDIT</button>
                <button class="k-button" id="getLaunchAdProduct" style="font-size: 16px;" type="submit"
                    name="Command" value="LaunchAdProduct">
                    <span class="k-update k-icon"></span>LAUNCH ADVERTISING</button>
            </div>
        </li>
        <li>
            <h3>
                Product / Service Summary</h3>
        </li>
    </ul>
</div>
<div style="height: 300px; overflow: auto; width: 100%; margin-top: 0px;">
    @Html.Partial("Preview", @Model)
</div>
<style>
    .creditCardlabel
    {
        min-width: 100px;
    }
</style>
<script language="javascript">
    $(document).ready(function () {
        enableDisable();
        if ($('#IsCompleted').val() == 'False' && $('#IsLaunched').val() == 'True') {
            $('#getLaunchAdProduct').attr("disabled", true);
            $('#agreecheckbox').attr("disabled", true);
        }


        $("#btnCancel").click(function (event) {
            $.unblockUI();
        });

        if ($("#agreecheckbox:checked").val()) {
            $("#getLaunchAdProduct").attr('disabled', false);
        }
        else {
            if (@Model.BillType == 2) {
                $("#getLaunchAdProduct").attr('disabled', true);
            }
        }
    });
</script>
<script type="text/javascript">
    $('#creditcatdType').kendoDropDownList();
    $('#creditcardMonth').kendoDropDownList();
    $('#creditcardYear').kendoDropDownList();
    $('#dropDownRange').kendoDropDownList();
    $('#dropDownCreditCard').kendoDropDownList();

    $("#viewSelectedKeywords").click(function () {
        //alert('in viewSelectedKeywords');
        var length = tabStrip.items().length;
        var isSelectedKeywordsAdded = false;
        for (var item = 0; item < length; item++) {
            if (tabStrip.items().item(item).innerText == "View Keywords") {
                isSelectedKeywordsAdded = true;
                break;
            }
        }
        var keywordsUrl = $("#ViewSelectedKeywordsUrl").val();
        if (!isSelectedKeywordsAdded)
            tabStrip.append({
                text: "View Keywords",
                contentUrl: keywordsUrl
            });
        var tab = tabStrip.tabGroup.children('li:contains("View Keywords")');
        tabStrip.select(tab);
    });

    $("#editadproduct").click(function () {
        tabChange1();
    });

    $("#getLaunchAdProduct").click(function () {
        var urlStr = $('#LogoUrlStr').val() + 'congratulations.jpg';
        $('#displayBox').attr('src', urlStr);
    });

    $("#agreecheckbox").click(function () {
        if ($("#agreecheckbox:checked").val()) {
            $("#getLaunchAdProduct").attr('disabled', false);
        }
        else {
            $("#getLaunchAdProduct").attr('disabled', true);
        }
    });

    function tabChange1(parameters) {
        var tab = tabStrip.select();
        tabStrip.remove(tab);
        var reqtab = tabStrip.tabGroup.children('li:contains("Define Product")');
        tabStrip.select(reqtab);
    }

</script>