@using Semplest.Core.Helpers
@using Semplest.SharedResources.Helpers
@using SemplestWebApp.Helpers
@model SemplestModel.GeoTargeting
<div class="address">
    <table>
        <tr>
            <td>
                Street
            </td>
            <td>
                @Html.TextBoxFor(t => t.Address, new { @class = "k-textbox k-textboxAd" })
            </td>
            <td rowspan="5">
                <div id="optionsNarrative">
                </div>
            </td>
            <td>
                  @Html.HiddenFor(x => x.Delete, new { @class = "mark-for-delete" })
                @Html.LinkToRemoveNestedForm("Delete", "div.address", "input.mark-for-delete")
            </td>
        </tr>
        <tr>
            <td>
                City
            </td>
            <td>
                @Html.TextBoxFor(t => t.City, new { @class = "k-textbox k-textboxAd" })
                @Html.ValidationMessageFor(t => t.City)
            </td>
        </tr>
        <tr>
            <td>
                State
            </td>
            <td>
                @Html.DropDownListFor(t => t.StateCodeFK, new SelectList(Model.StateCodes, "StateAbbrPK", "StateAbbr",@Model.StateCodeFK), new { @class = "k-dropdownlist" })
            </td>
        </tr>
        <tr>
            <td>
                Zip
            </td>
            <td>
                @Html.TextBoxFor(t => t.Zip, new { @class = "k-textbox k-textboxAd" })
            </td>
        </tr>
        <tr>
            <td>
                Proximity
            </td>
            <td>
                @Html.TextBoxFor(t => t.ProximityRadius, new { @class = "k-textbox k-textboxAd" })
                @Html.ValidationMessageFor(t => t.ProximityRadius)
                @Html.TextBoxFor(t => t.Latitude, new { @class = "hidden" })
                @Html.TextBoxFor(t => t.Longitude, new { @class = "hidden" })
            </td>
        </tr>
        <tr>
            <td colspan="3">
                @Html.ValidationSummary(true)
                
            </td>
        </tr>
    </table>
</div>
<script>
    $("#@Html.ClientIdFor(t=>t.ProximityRadius)").change(function (e) {
        doOptions();
    });
    $("#@Html.ClientIdFor(t=>t.City)").change(function (e) {
        doOptions();
    });
    $("#@Html.ClientIdFor(t=>t.StateCodeFK)").change(function (e) {
        doOptions();
    });
    $("#@Html.ClientIdFor(t=>t.Zip)").change(function (e) {
        doOptions();
    });
    $("#@Html.ClientIdFor(t=>t.Address)").change(function (e) {
        doOptions();
    });
</script>
<style>
    .hidden
    {
        display: none;
    }
</style>